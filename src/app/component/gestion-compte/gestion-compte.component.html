<div class="gestion-compte">
  <div class="form-container">
    <div class="recherche">
      <label class="form-label">Rechercher un compte par son intitulé : </label>
      <input
        type="text"
        [ngModel]="recherche"
        (ngModelChange)="search($event)"
        class="form-control"
      />
    </div>
    <div class="card mt-3">
      <h2 class="text-center"><strong>Voici la liste de vos différents comptes</strong></h2>
      <h3 class="text-center"><strong>Vous pouvez modifier ou supprimer vos comptes</strong></h3>
      <div class="table-responsive">
      <table class="table table-striped mt-3">
        <thead>
          <tr>
            <!-- <th>Id de compte</th> -->
            <th>Intitulé du compte</th>
            <th>Description</th>
            <th>Date d'ajout</th>
            <th>Date de mise à jour</th>
            <th>Nom Utilisateur Plateforme</th>
            <th>url Plateforme</th>
            <th>Valeur de Mot de Passe du Plateforme</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let t of list">
            <!-- <td>{{ t.id }}</td> -->
            <td>{{ t.nom }}</td>
            <td>{{ t.description }}</td>
            <!-- Utilisation de la pipe date pour afficher les dates au format français-->
            <td>{{ t.dateAjout | date: 'dd/MM/yyyy, HH:mm' }}</td>
            <td>{{ t.dateMAJ | date: 'dd/MM/yyyy, HH:mm' }}</td>
            <td>{{ t.nomUtilisateurPlateforme }}</td>
            <td>{{ t.urlPlateforme }}</td>
            <td>
              <div class="input-group">
                <input
                  #passwordField
                  type="password"
                  [(ngModel)]="t.valeurMotdePassePlateforme"
                  class="form-control"
                />
                <div class="input-group-append">
                  <button (click)="passwordField.type = passwordField.type === 'password' ? 'text' : 'password'" class="btn btn-outline-secondary show-password-button">
                    <i class="bi bi-eye"></i>
                  </button>
                </div>
              </div>
            </td>
            <td>
              <div class="btn-group btn-group-sm">
                <button (click)="edit(t.id)" class="btn btn-outline-secondary">
                  <i class="bi bi-pen"></i>
                </button>
                <button (click)="remove(t.id)" class="btn btn-danger">
                  <i class="bi bi-trash"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="4">
              <h3 class="text-center"><strong>Appuyer sur + pour créer un nouveau compte</strong></h3>
              <button (click)="add()" class="btn btn-outline-secondary">
                <i class="bi bi-plus"></i>
              </button>
            </td>
          </tr>
          <tr *ngIf="gestionCompteForm">
            <!-- <td>
              <input
                type="text"
                [(ngModel)]="gestionCompteForm.id"
                class="form-control"
                readonly
              />
            </td> -->
            <td>
              <input
                type="text"
                [(ngModel)]="gestionCompteForm.nom"
                class="form-control"
              />
            </td>
            <td>
              <input
                type="text"
                [(ngModel)]="gestionCompteForm.description"
                class="form-control"
              />
            </td>
            <td>
              <input
                type="date"
                [ngModel]="gestionCompteForm.dateAjout | date: 'yyyy-MM-dd'"
                (ngModelChange)="updateDateAjout($event)"
                class="form-control"
                readonly
              />
            </td>
            <td>
              <input
                type="date"
                [ngModel]="gestionCompteForm.dateMAJ | date: 'yyyy-MM-dd'"
                (ngModelChange)="updateDateModif($event)"
                class="form-control"
                readonly
              />
            </td>
            <td>
              <input
                type="text"
                [(ngModel)]="gestionCompteForm.nomUtilisateurPlateforme"
                class="form-control"
              />
            </td>
            <td>
              <input
                type="text"
                [(ngModel)]="gestionCompteForm.urlPlateforme"
                class="form-control"
              />
            </td>
            <td>
              <input
                type="password"
                [(ngModel)]="gestionCompteForm.valeurMotdePassePlateforme"
                class="form-control"
              />
            </td>

            <td>
              <div class="btn-group">
                <button (click)="save()" class="btn btn-outline-secondary">
                  <i class="bi bi-check-lg"></i>
                </button>
                <button (click)="cancel()" class="btn btn-outline-warning">
                  <i class="bi bi-backspace"></i>
                </button>
              </div>
            </td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>
</div>
</div>
